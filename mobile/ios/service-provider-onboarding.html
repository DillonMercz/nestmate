<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Service Provider Onboarding Form</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-5">
  <div class="progress">
    <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
  </div>

  <form id="multi-page-form">
    <div class="form-page">
      <h2>Contact Information</h2>
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" placeholder="Enter your name">
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" placeholder="Enter your email">
      </div>
      <div class="form-group">
        <label for="phone">Phone Number</label>
        <input type="tel" class="form-control" id="phone" placeholder="Enter your phone number">
      </div>
    </div>

 <div class="form-page">
      <h2>Services Offered</h2>
      <div class="form-group">
        <label for="main-category">Main Category</label>
        <select class="form-control" id="main-category">
          <option disabled selected>Select a main category</option>
        </select>
      </div>
      <div class="form-group">
        <label>Subcategories</label>
        <ul id="subcategory-list" class="list-group">
          <!-- Subcategories checkboxes and custom input will be dynamically added here -->
        </ul>
        <input type="text" class="form-control mt-2" id="custom-subcategory" placeholder="Enter custom subcategory">
        <small class="form-text text-muted">Separate multiple subcategories with commas.</small>
      </div>
    </div>

    <div class="form-page">
      <h2>Pricing and Availability</h2>
      <div class="form-group">
        <label for="pricing">Pricing</label>
        <input type="text" class="form-control" id="pricing" placeholder="Enter your pricing details">
      </div>
      <div class="form-group">
        <label for="availability">Availability</label>
        <input type="text" class="form-control" id="availability" placeholder="Enter your availability">
      </div>
    </div>

    <div class="form-page">
      <h2>Experience and Portfolio</h2>
      <div class="form-group">
        <label for="experience">Years of Experience</label>
        <input type="number" class="form-control" id="experience" placeholder="Enter your years of experience">
      </div>
      <div class="form-group">
        <label for="portfolio">Portfolio</label>
        <textarea class="form-control" id="portfolio" rows="4" placeholder="Provide examples of your past work"></textarea>
      </div>
    </div>

    <div class="form-page">
      <h2>Insurance and Background Check</h2>
      <div class="form-group">
        <label for="insurance">Insurance Information</label>
        <textarea class="form-control" id="insurance" rows="4" placeholder="Provide insurance details"></textarea>
      </div>
      <div class="form-group form-check">
        <input type="checkbox" class="form-check-input" id="background-check">
        <label class="form-check-label" for="background-check">I consent to a background check</label>
      </div>
    </div>

    <div class="form-page">
      <h2>References and Payment Information</h2>
      <div class="form-group">
        <label for="references">References</label>
        <textarea class="form-control" id="references" rows="4" placeholder="Provide references"></textarea>
      </div>
      <div class="form-group">
        <label for="payment">Payment Methods</label>
        <input type="text" class="form-control" id="payment" placeholder="Enter accepted payment methods">
      </div>
    </div>

    <div class="form-page">
      <h2>Terms and Conditions</h2>
      <div class="form-group form-check">
        <input type="checkbox" class="form-check-input" id="terms">
        <label class="form-check-label" for="terms">I agree to the terms and conditions</label>
      </div>
    </div>

    <div class="form-page">
      <h2>Profile Picture</h2>
      <div class="form-group">
        <label for="profile-picture">Profile Picture</label>
        <input type="file" class="form-control-file" id="profile-picture">
      </div>
    </div>

    <div class="form-page">
      <input type="submit" class="btn btn-primary" value="Submit">
    </div>
  </form>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
  const form = document.getElementById("multi-page-form");
  const progressBar = document.querySelector(".progress-bar");

  // Sample categories and subcategories data
  const categories = [
    {
      "name": "Pressure Washing",
      "subcategories": [
        "Driveway", "Patio", "Pool Deck", "Sidewalk", "Fence", "House Exterior", "Roof", "Boat Dock"
      ]
    },
    {
      "name": "Fencing",
      "subcategories": [
        "Wooden Fence Installation", "Wooden Fence Repair", "Vinyl Fence Installation", "Vinyl Fence Repair",
        "Chain Link Fence Installation", "Chain Link Fence Repair", "Wrought Iron Fence Installation", "Wrought Iron Fence Repair",
        "Aluminum Fence Installation", "Aluminum Fence Repair", "Farm and Ranch Fence Installation", "Farm and Ranch Fence Repair",
        "Pool Fence Installation", "Pool Fence Repair", "Fence Staining and Painting", "Fence Power Washing"
      ]
    }
  ];

  const mainCategorySelect = document.getElementById("main-category");
  const subcategoryList = document.getElementById("subcategory-list");
  const customSubcategoryInput = document.getElementById("custom-subcategory");

  categories.forEach(category => {
    const option = document.createElement("option");
    option.text = category.name;
    mainCategorySelect.appendChild(option);
  });

  mainCategorySelect.addEventListener("change", function () {
    subcategoryList.innerHTML = "";
    const selectedCategory = categories.find(category => category.name === this.value);

    if (selectedCategory) {
      selectedCategory.subcategories.forEach(subcategory => {
        const listItem = document.createElement("li");
        listItem.classList.add("list-group-item");
        listItem.innerHTML = `
          <label class="form-check">
            <input type="checkbox" class="form-check-input" name="subcategories" id="${subcategory}" value="${subcategory}">
            ${subcategory}
          </label>
        `;
        subcategoryList.appendChild(listItem);
      });
    }
  });

  customSubcategoryInput.addEventListener("input", function () {
    const inputText = customSubcategoryInput.value.trim();
    if (inputText.endsWith(",")) {
      const subcategory = inputText.slice(0, -1); // Remove trailing comma
      addChip(subcategory, true);
      customSubcategoryInput.value = ""; // Clear the input
    }
  });

  subcategoryList.addEventListener("change", function (event) {
    if (event.target.type === "checkbox" && event.target.checked) {
      addChip(event.target.value, false);
      event.target.disabled = true; // Disable the checkbox
    } else if (event.target.type === "checkbox" && !event.target.checked) {
      removeChip(event.target.value);
      event.target.disabled = false; // Enable the checkbox
    }
  });

  subcategoryList.addEventListener("click", function (event) {
    if (event.target.classList.contains("chip")) {
      const isFromCheckbox = event.target.getAttribute("from-checkbox") === "true";
      const subcategory = event.target.textContent.trim();
      removeChip(subcategory, isFromCheckbox);
    } else if (event.target.classList.contains("remove-button")) {
      const checkboxId = event.target.id.replace("-remove", "");
      const checkbox = document.getElementById(checkboxId);
      if (checkbox) {
        checkbox.checked = false;
        checkbox.disabled = false; // Enable the checkbox
      }
      event.target.closest(".chip").remove();
    }
  });

  function addChip(subcategory, fromCheckbox) {
    const chip = document.createElement("span");
    chip.classList.add("badge", "badge-secondary", "chip");
    chip.textContent = subcategory;
    
    if (fromCheckbox) {
      chip.setAttribute("from-checkbox", "true");
    }
    
    const closeButton = document.createElement("span");
    closeButton.classList.add("close", "remove-button");
    closeButton.id = `${subcategory}-remove`;
    closeButton.innerHTML = "&times;";
    chip.appendChild(closeButton);
    subcategoryList.appendChild(chip);
  }

  function removeChip(subcategory, fromCheckbox) {
    const chip = Array.from(subcategoryList.querySelectorAll(".chip")).find(ch => ch.textContent === subcategory);
    if (chip) {
      chip.remove();
    }

    if (fromCheckbox) {
      const checkbox = Array.from(subcategoryList.querySelectorAll('input[type="checkbox"]'))
        .find(cb => cb.value === subcategory);
      if (checkbox) {
        checkbox.checked = false;
        checkbox.disabled = false; // Enable the checkbox
      }
    }
  }

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    // Handle form submission here
  });
</script>






</body>
</html>
