<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, minimal-ui, viewport-fit=cover">
    <meta name="theme-color" content="#2196f3">
    <meta name="author" content="Nestmate" />
    <meta name="keywords" content="" />
    <meta name="robots" content="" />
    <meta name="title" content="NestMate Home Services - Book Now">
    <meta name="description" content="Book Home Services With A Tap.">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://metatags.io/">
    <meta property="og:title" content="NestMate Home Services - Book Now">
    <meta property="og:description" content="Book Home Services With A Tap.">
    <meta property="og:image" content="https://i.imgur.com/0zrobiV.png">
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://metatags.io/">
    <meta property="twitter:title" content="NestMate Home Services - Book Now">
    <meta property="twitter:description" content="Book Home Services With A Tap.">
    <meta property="twitter:image" content="https://i.imgur.com/0zrobiV.png">
    <meta name="description" content="NestMate - Services ">
    <meta name="format-detection" content="telephone=no">
    <!-- Favicons Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.ico" />
    <!-- Title -->
    <title>Nestmate Home Services</title>
    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/vendor/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Racing+Sans+One&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/smoothness/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
</head>
<style type="text/css">
/* Your existing styles */

/* Add the wave animation styles */
.wave-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 150px;
    /* Adjust this value to control the wave height */
    overflow: hidden;
}

.wave {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: --primary;
    /* Adjust this color as needed */
    animation: waveAnimation 4s linear infinite;
    transform-origin: bottom;
}

@keyframes waveAnimation {
    0% {
        transform: scaleY(1);
    }

    50% {
        transform: scaleY(0.8);
    }

    100% {
        transform: scaleY(1);
    }
}
</style>

<body data-theme-color="color-yellow">
    <div class="page-wraper">
        <!-- Preloader -->
        <div id="preloader">
            <div class="spinner"></div>
        </div>
        <!-- Preloader end-->
        <!-- Page Content -->
        <div class="page-content">
            <!-- Banner -->
            <div class="banner-wrapper shape-1">
                <div class="container inner-wrapper">
                    <br><br><br>
                    <h2 class="dz-title">Profile and Settings</h2>
                    <p class="mb-0">Edit your profile and settings.</p>
                </div>
                <div class="wave-container">
                    <div class="wave"></div>
                </div>
            </div>
            <!-- User Profile Section -->
            <div class="container">
                <div class="">
                    <form id="profile-form">
                        <div class="input-group">
                            <input type="text" id="name" placeholder="Full Name" class="form-control">
                        </div>
                        <div class="input-group">
                            <input type="tel" id="phone" placeholder="Phone Number" class="form-control">
                        </div>
                        <div class="input-group">
                            <input class="form-control" type="search" dir="ltr" spellcheck=false autocorrect="off" autocomplete="off" autocapitalize="off" id="autocomplete" name="autocomplete" placeholder="Enter your address">
                            <br>
                        </div>
                        <input type="text" id="zipcode" placeholder="Zip Code" hidden class="form-control">
                        <div class="input-group">
                            <input type="email" id="email" placeholder="Email" class="form-control" disabled>
                        </div>
                        <!-- ... Other input fields ... -->
                        <div class="input-group">
                            <button type="submit" class="btn mt-2 btn-primary w-100 btn-rounded">Save</button>
                        </div>
                    </form>
                    <h1 class="">Settings:</h2>
                        <br>
                        <div class="mode">
                            <span class="dz-icon bg-green light">
                                <i class="fa-solid fa-moon"></i>
                            </span>
                            <span>Dark Mode</span>
                            <div class="custom-switch">
                                <input type="checkbox" class="switch-input theme-btn" id="toggle-dark-menu">
                                <label class="custom-switch-label" for="toggle-dark-menu"></label>
                            </div>
                        </div>
                        <br><br>
                        <button id="becomeProviderBtn" class="btn btn-primary w-100 btn-rounded">Become a Service Provider</button>
                        <button id="deleteAccountBtn" class="btn btn-danger w-100 btn-rounded mt-2">Delete Account</button>
                        <br>
                        <br>
                        <br>
                        <br>
                </div>
            </div>
            <!-- Modal for password confirmation -->
            <div class="modal fade" id="passwordConfirmationModal" tabindex="-1" aria-labelledby="passwordConfirmationModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="passwordConfirmationModalLabel">Confirm Account Deletion</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>Please enter your password to delete the account.</p>
                            <input type="password" id="passwordInput" class="form-control" placeholder="Enter your password">
                            <div id="passwordError" class="text-danger mt-2"></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
            <button type="button" style="display:none" class="btn btn-danger btn-block my-3 dzToastBtn" id="toastbtn5">Show Alert</button>
            <button type="button" style="display:none" class="btn btn-success btn-block my-3 dzToastBtn" id="toastbtn6">Show Alert</button>
            <div style="position:absolute;right:10px;bottom: 80px;">
                <div id="dzToast5" class="dzToastArea toast style-1 toast-danger dz-toast on-bottom" role="alert" aria-live="polite" aria-atomic="true">
                    <div class="toast-body">
                        <svg fill="#ff3838" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-4.53 -4.53 54.37 54.37" xml:space="preserve" stroke="#ff3838">
                            <svg fill="#ff3838" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-4.53 -4.53 54.37 54.37" xml:space="preserve" stroke="#ff3838">
                                <g id="SVGRepo_bgCarrier" stroke-width="0">
                                    <rect x="-4.53" y="-4.53" width="54.37" height="54.37" rx="27.185" fill="#fafeff" strokewidth="0"></rect>
                                </g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <g>
                                        <path d="M22.675,0.02c-0.006,0-0.014,0.001-0.02,0.001c-0.007,0-0.013-0.001-0.02-0.001C10.135,0.02,0,10.154,0,22.656 c0,12.5,10.135,22.635,22.635,22.635c0.007,0,0.013,0,0.02,0c0.006,0,0.014,0,0.02,0c12.5,0,22.635-10.135,22.635-22.635 C45.311,10.154,35.176,0.02,22.675,0.02z M22.675,38.811c-0.006,0-0.014-0.001-0.02-0.001c-0.007,0-0.013,0.001-0.02,0.001 c-2.046,0-3.705-1.658-3.705-3.705c0-2.045,1.659-3.703,3.705-3.703c0.007,0,0.013,0,0.02,0c0.006,0,0.014,0,0.02,0 c2.045,0,3.706,1.658,3.706,3.703C26.381,37.152,24.723,38.811,22.675,38.811z M27.988,10.578 c-0.242,3.697-1.932,14.692-1.932,14.692c0,1.854-1.519,3.356-3.373,3.356c-0.01,0-0.02,0-0.029,0c-0.009,0-0.02,0-0.029,0 c-1.853,0-3.372-1.504-3.372-3.356c0,0-1.689-10.995-1.931-14.692C17.202,8.727,18.62,5.29,22.626,5.29 c0.01,0,0.02,0.001,0.029,0.001c0.009,0,0.019-0.001,0.029-0.001C26.689,5.29,28.109,8.727,27.988,10.578z"></path>
                                    </g>
                                </g>
                            </svg>
                        </svg>
                        <div class="toast-content ms-3 me-2">
                            <strong>An error ocurred</strong>
                            <small class="d-block">Please try again later.</small>
                        </div>
                        <button class="btn btn-close position-absolute p-1" type="button" data-bs-dismiss="toast" aria-label="Close"> </button>
                    </div>
                </div>
            </div>
            <div style="position:absolute;right:10px;bottom: 80px; z-index: 10000;">
                <div id="dzToast6" class="dzToastArea toast style-1 toast-success dz-toast on-bottom" role="alert" aria-live="polite" aria-atomic="true">
                    <div class="toast-body">
                        <svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <!-- Circular green background -->
                            <circle cx="50" cy="50" r="45" fill="#00C853" />
                            <!-- White checkmark -->
                            <path d="M23 47.5L38 62.5L77 23" stroke="white" stroke-width="7" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                        </svg>
                        <div class="toast-content ms-3 me-2">
                            <strong>Success!</strong>
                            <small class="d-block">Successfully updated your profile.</small>
                        </div>
                        <button class="btn btn-close position-absolute p-1" type="button" data-bs-dismiss="toast" aria-label="Close"> </button>
                    </div>
                </div>
            </div>
            <!-- Menubar -->
            <div class="menubar-area">
                <div class="toolbar-inner menubar-nav">
                    <a href="search.html" class="nav-link">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.14373 20.7821V17.7152C9.14372 16.9381 9.77567 16.3067 10.5584 16.3018H13.4326C14.2189 16.3018 14.8563 16.9346 14.8563 17.7152V20.7732C14.8562 21.4473 15.404 21.9951 16.0829 22H18.0438C18.9596 22.0023 19.8388 21.6428 20.4872 21.0007C21.1356 20.3586 21.5 19.4868 21.5 18.5775V9.86585C21.5 9.13139 21.1721 8.43471 20.6046 7.9635L13.943 2.67427C12.7785 1.74912 11.1154 1.77901 9.98539 2.74538L3.46701 7.9635C2.87274 8.42082 2.51755 9.11956 2.5 9.86585V18.5686C2.5 20.4637 4.04738 22 5.95617 22H7.87229C8.19917 22.0023 8.51349 21.8751 8.74547 21.6464C8.97746 21.4178 9.10793 21.1067 9.10792 20.7821H9.14373Z" fill="#130F26" />
                        </svg>
                    </a>
                    <a href="search.html" class="nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">
                            <path d="M469.3 19.3l23.4 23.4c25 25 25 65.5 0 90.5l-56.4 56.4L322.3 75.7l56.4-56.4c25-25 65.5-25 90.5 0zM44.9 353.2L299.7 98.3 413.7 212.3 158.8 467.1c-6.7 6.7-15.1 11.6-24.2 14.2l-104 29.7c-8.4 2.4-17.4 .1-23.6-6.1s-8.5-15.2-6.1-23.6l29.7-104c2.6-9.2 7.5-17.5 14.2-24.2zM249.4 103.4L103.4 249.4 16 161.9c-18.7-18.7-18.7-49.1 0-67.9L94.1 16c18.7-18.7 49.1-18.7 67.9 0l19.8 19.8c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1l45.1 45.1zM408.6 262.6l45.1 45.1c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1L496 350.1c18.7 18.7 18.7 49.1 0 67.9L417.9 496c-18.7 18.7-49.1 18.7-67.9 0l-87.4-87.4L408.6 262.6z" fill="#a19fa8" /></svg>
                    </a>
                    <a href="messages.html" class="nav-link">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path opacity="0.4" d="M22 15.9403C22 18.7303 19.76 20.9903 16.97 21.0003H16.96H7.05C4.27 21.0003 2 18.7503 2 15.9603V15.9503C2 15.9503 2.006 11.5243 2.014 9.2983C2.015 8.8803 2.495 8.6463 2.822 8.9063C5.198 10.7913 9.447 14.2283 9.5 14.2733C10.21 14.8423 11.11 15.1633 12.03 15.1633C12.95 15.1633 13.85 14.8423 14.56 14.2623C14.613 14.2273 18.767 10.8933 21.179 8.9773C21.507 8.7163 21.989 8.9503 21.99 9.3673C22 11.5763 22 15.9403 22 15.9403Z" fill="#a19fa8" />
                            <path d="M21.4761 5.67369C20.6101 4.04169 18.9061 2.99969 17.0301 2.99969H7.05013C5.17413 2.99969 3.47013 4.04169 2.60413 5.67369C2.41013 6.03869 2.50213 6.4937 2.82513 6.75169L10.2501 12.6907C10.7701 13.1107 11.4001 13.3197 12.0301 13.3197C12.0341 13.3197 12.0371 13.3197 12.0401 13.3197C12.0431 13.3197 12.0471 13.3197 12.0501 13.3197C12.6801 13.3197 13.3101 13.1107 13.8301 12.6907L21.2551 6.75169C21.5781 6.4937 21.6701 6.03869 21.4761 5.67369Z" fill="#a19fa8" />
                        </svg>
                    </a>
                    <a href="links.html" class="nav-link active">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path opacity="0.4" d="M16.0755 2H19.4615C20.8637 2 22 3.14585 22 4.55996V7.97452C22 9.38864 20.8637 10.5345 19.4615 10.5345H16.0755C14.6732 10.5345 13.537 9.38864 13.537 7.97452V4.55996C13.537 3.14585 14.6732 2 16.0755 2Z" fill="#a19fa8" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.53852 2H7.92449C9.32676 2 10.463 3.14585 10.463 4.55996V7.97452C10.463 9.38864 9.32676 10.5345 7.92449 10.5345H4.53852C3.13626 10.5345 2 9.38864 2 7.97452V4.55996C2 3.14585 3.13626 2 4.53852 2ZM4.53852 13.4655H7.92449C9.32676 13.4655 10.463 14.6114 10.463 16.0255V19.44C10.463 20.8532 9.32676 22 7.92449 22H4.53852C3.13626 22 2 20.8532 2 19.44V16.0255C2 14.6114 3.13626 13.4655 4.53852 13.4655ZM19.4615 13.4655H16.0755C14.6732 13.4655 13.537 14.6114 13.537 16.0255V19.44C13.537 20.8532 14.6732 22 16.0755 22H19.4615C20.8637 22 22 20.8532 22 19.44V16.0255C22 14.6114 20.8637 13.4655 19.4615 13.4655Z" fill="#a19fa8" />
                        </svg>
                    </a>
                </div>
            </div>
            <!-- Menubar -->
        </div>
        <!-- Page Content End -->
        <!-- Footer -->
    </div>
    <!--**********************************
    Scripts
***********************************-->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/settings.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-analytics-compat.js"></script>
    <script>
    var currentUser
    var docId
    document.addEventListener("DOMContentLoaded", function() {
        // Get the theme color from the data-theme-color attribute
        const themeColor = document.body.getAttribute("data-theme-color");

        // Find the wave element
        const waveElement = document.querySelector(".wave");

        // Set the background color of the wave element
        waveElement.style.backgroundColor = themeColor;
    });

    const firebaseConfig = {
        apiKey: "AIzaSyBd9mTGo1lM19_Kcqf_vl7-pE4Rq1AzWA8",
        authDomain: "bookings-49c4e.firebaseapp.com",
        projectId: "bookings-49c4e",
        storageBucket: "bookings-49c4e.appspot.com",
        messagingSenderId: "491340380786",
        appId: "1:491340380786:web:50ea0578b31309494ae0eb",
        measurementId: "G-3JJKPRCD9Y"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics()

    // Check if a user is authenticated
    firebase.auth().onAuthStateChanged((user) => {
        if (user) {
            currentUser = user
            const db = firebase.firestore();
            const profileRef = db.collection("profiles");

            profileRef
                .where("email", "==", user.email)
                .get()
                .then((querySnapshot) => {
                    if (!querySnapshot.empty) {
                        const profileData = querySnapshot.docs[0].data();
                        docId = querySnapshot.docs[0].id
                        document.getElementById("name").value = profileData.name;
                        document.getElementById("phone").value = profileData.phone;
                        document.getElementById("autocomplete").value = profileData.address;
                        document.getElementById("zipcode").value = profileData.zipcode;
                        document.getElementById("email").value = user.email;
                    } else {
                        console.error("No user profile found");
                        window.location.href = "login.html"; // Redirect to login page
                    }
                })
                .catch((error) => {
                    console.error("Error fetching user profile:", error);
                });
        } else {
            console.error("User not authenticated");
            window.location.href = "login.html"; // Redirect to login page
        }
    });


    document.addEventListener("DOMContentLoaded", function() {
        // Find the "Save" button
        const saveButton = document.querySelector("#profile-form button[type='submit']");

        // Add event listener to the "Save" button
        saveButton.addEventListener("click", function(event) {
            event.preventDefault(); // Prevent page reload

            // Retrieve input values
            const name = document.querySelector("#name").value;
            const phone = document.querySelector("#phone").value;
            const address = document.querySelector("#autocomplete").value;
            const zipcode = document.querySelector("#zipcode").value;

            // Update the database (if applicable)
            const db = firebase.firestore();
            // Assuming 'user' is already authenticated
            db.collection("profiles").doc(docId).update({
                    name: name,
                    phone: phone,
                    address: address,
                    zipcode: zipcode
                })
                .then(() => {
                    // Show success feedback to the user (e.g., toast notification)
                    // Reload the page or perform any other desired action
                    var errorToast = document.getElementById('dzToast6');
                    var errorToastContent = errorToast.querySelector('.toast-content');
                    errorToastContent.innerHTML = `<strong>Successfully Updated Your Profile</strong>`;
                    const toast = new bootstrap.Toast(errorToast);
                    toast.show();

                })
                .catch((error) => {
                    console.error("Error updating profile:", error);
                    // Show error feedback to the user (e.g., toast notification)
                    // Show error toast
                    // Error occurred during signup
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.log(errorCode, errorMessage);
                    var errorToast = document.getElementById('dzToast5');
                    var errorToastContent = errorToast.querySelector('.toast-content');
                    errorToastContent.innerHTML = `<strong>${errorMessage}</strong>`;
                    const toast = new bootstrap.Toast(errorToast);
                    toast.show();
                });
        });
    });
    // Function to become a service provider
    document.getElementById('becomeProviderBtn').addEventListener('click', () => {
        // Implement your logic here to handle becoming a service provider
        // This could include updating user roles or adding user information to a "Service Providers" collection
        // You can use Firebase Firestore to store this information
    });

// Function to open the password confirmation modal
document.getElementById('deleteAccountBtn').addEventListener('click', () => {
    $('#passwordConfirmationModal').modal('show');
});

// Function to confirm account deletion
document.getElementById('confirmDeleteBtn').addEventListener('click', () => {
    const password = document.getElementById('passwordInput').value;
    const user = firebase.auth().currentUser;

    if (!password) {
        document.getElementById('passwordError').textContent = "Please enter your password";
        return;
    }

    // Re-authenticate the user with their password
    const credentials = firebase.auth.EmailAuthProvider.credential(user.email, password);
    user.reauthenticateWithCredential(credentials)
        .then(() => {
            // Re-authentication successful, delete the account
            user.delete().then(() => {
                console.log("User account deleted successfully");
                // You can also delete the user's information from Firestore if needed
                $('#passwordConfirmationModal').modal('hide');
                // Redirect to a sign-out or landing page
            }).catch((error) => {
                console.error("Error deleting user account:", error);
            });
        })
        .catch((error) => {
            document.getElementById('passwordError').textContent = "Invalid password";
            console.error("Error re-authenticating user:", error);
        });
});


    // Select the phone input field
    const phoneInput = document.getElementById('phone');

    // Define the format function
    function formatPhoneNumber(phoneNumberString) {
        const cleaned = ('' + phoneNumberString).replace(/\D/g, '');
        const match = cleaned.match(/^(\d{3})(\d{3})(\d{4})$/);
        if (match) {
            return '(' + match[1] + ') ' + match[2] + '-' + match[3];
        }
        return phoneNumberString;
    }

    // Add an event listener to the input field
    phoneInput.addEventListener('input', () => {
        phoneInput.value = formatPhoneNumber(phoneInput.value);
    });

    function extractZipCode(address) {
        // Search for a ZIP code pattern within the address
        var zipPattern = /\b\d{5}(?:-\d{4})?\b/;
        var match = address.match(zipPattern);

        if (match) {
            return match[0];
        } else {
            return "";
        }
    }

    function autocompleteAddress() {
        $('#autocomplete').autocomplete({
            source: async function(request, response) {
                const options = {
                    countrycodes: 'us', // limit results to the United States
                    limit: 10, // limit to a maximum of 10 results
                };
                const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(request.term)}&${new URLSearchParams(options)}`;
                const result = await fetch(url);
                const json = await result.json();
                console.log(json)
                response(json.map(result => result.display_name));
            },
            minLength: 2,
            select: function(event, ui) {
                var selectedAddress = ui.item.value;
                var zip = extractZipCode(selectedAddress);
                console.log(zip)
                document.getElementById("zipcode").value = zip;
            }

        });
    }

    autocompleteAddress();
    </script>
</body>

</html>